'use client';
'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var utils = require('@react-aria/utils');
var React = require('react');
var context = require('./context-38cb595b.cjs.prod.js');
var use_dropdown_item_id = require('./use-dropdown-item-id-4f2bd16e.cjs.prod.js');
var useScrollIntoView = require('./use-scroll-into-view-af77842d.cjs.prod.js');
var index = require('./index-7955fb8e.cjs.prod.js');
var forwardRef = require('./forward-ref-0e64c63e.cjs.prod.js');
var context$1 = require('./context-3dc3ef27.cjs.prod.js');
var styles = require('./styles-18fee4e4.cjs.prod.js');
var jsxRuntime = require('react/jsx-runtime');
var checkIcon = require('./check-icon-19cfc34c.cjs.prod.js');
var spacer = require('./spacer-388e98f9.cjs.prod.js');
var menu_item = require('./menu-item-5316e708.cjs.prod.js');
var align_child_to_text = require('./align-child-to-text-c75908d4.cjs.prod.js');
require('./utils-72a515c0.cjs.prod.js');
require('./tw-merge-885aa7a8.cjs.prod.js');
require('tailwind-merge');
require('../tokens/dist/adaptavant-eds-core-tokens.cjs.prod.js');
require('./tw-9929267e.cjs.prod.js');
require('./styles-30814c9d.cjs.prod.js');
require('./box-e39057bd.cjs.prod.js');

/**
 * Item to be rendered inside of a ComboboxListbox.
 */
const ComboboxItem = forwardRef.forwardRefWithGenericComponent(function ComboboxItem({
  children,
  avoidCloseOnClick,
  className = '',
  classNames = {},
  id: idProp,
  isDisabled = false,
  onClick,
  option,
  style = {},
  styles: styles$1 = {},
  ...consumerProps
}, forwardedRef) {
  const {
    activeDescendantId,
    closeMenu
  } = context.useDropdownContext();
  const {
    onSelectionChange,
    selectedKey,
    selectedOption
  } = context$1.useCombobox();
  const id = use_dropdown_item_id.useDropdownItemId(idProp);
  const isHighlighted = id === activeDescendantId;
  const isSelected = Boolean(selectedOption && selectedOption[selectedKey] === option[selectedKey]);

  // Ensure the active descendant is visible in long lists with overflow.
  // Without this, the active item may not be visible on the screen.
  const scrollIntoView = useScrollIntoView.useScrollIntoView(isHighlighted);
  const handleOnClick = React.useCallback(event => {
    if (typeof onClick === 'function') {
      onClick(event);
    }
    onSelectionChange(option);
    if (avoidCloseOnClick) return;
    closeMenu();
  }, [avoidCloseOnClick, closeMenu, onClick, onSelectionChange, option]);
  const railStart = /*#__PURE__*/jsxRuntime.jsx(align_child_to_text.AlignChildToText, {
    children: isSelected ? /*#__PURE__*/jsxRuntime.jsx(checkIcon.CheckIcon, {
      size: "16"
    }) : /*#__PURE__*/jsxRuntime.jsx(spacer.Spacer, {
      className: "w-4"
    })
  });
  const styleProps = index.getStyleProps({
    className,
    classNames,
    style,
    styles: styles$1,
    tw: styles.getComboboxItemStyles(Boolean(selectedOption))
  });
  const menuItemTrackStyleProps = {
    className: styleProps('root').className,
    classNames: {
      center: styleProps('center').className,
      railStart: styleProps('railStart').className,
      railEnd: styleProps('railEnd').className
    },
    style: styleProps('root').style,
    styles: {
      center: styleProps('center').style,
      railStart: styleProps('railStart').style,
      railEnd: styleProps('railEnd').style
    }
  };
  return /*#__PURE__*/jsxRuntime.jsx(menu_item.MenuItem, {
    ...consumerProps,
    "aria-selected": isSelected,
    id: id,
    isDisabled: isDisabled,
    isHighlighted: isHighlighted,
    isSelected: isSelected,
    onClick: isDisabled ? undefined : handleOnClick,
    railStart: selectedOption ? railStart : null,
    ref: utils.mergeRefs(scrollIntoView, forwardedRef),
    role: "option",
    tabIndex: -1,
    ...menuItemTrackStyleProps,
    children: children
  });
});

exports.ComboboxItem = ComboboxItem;
